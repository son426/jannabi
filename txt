-------------0711-------------
[audio]
html audo 태그
- 맥 사파리에서 두번째부터 재생이 잘 안되는 이슈 있다고 함.


자동 재생하려면 할 수는 있는 거 같음. html 태그 쓰고 iframe 끼워넣으니까 됨.
javascript로 제어하는 = audio 객체 생성해서 해야하는데. 그 부분 필요

audio 관련 
로직 짤 순서
- audio 10개 담고, 스크롤 할때마다 audio 바뀌게 재생
- audio 자동재생


[스크롤 따라서 인덱스 바뀌게]
- intersection observer api
- 완료


[useRef로 DOM 집었을 때, useEffect 안에 ref.current 써야 할때 문제]
1. ref 객체 처음 생성 (null 선언)
2. hook 실행 (null로 감지)
3. ref.current 객체 할당
4. hook 재실행 안됨 -> hook 안에 있는 ref.current 관련 로직이 안됨.

react는 ref가 설정/해제되는 상황을 다룰 때, callback ref 방법 제공
-> 추후 공부



-------------0712-------------

mp3 기능 해결
- 노래 나오게
- 우선 상세페이지에서 할 수 있게 해보고
- autoPlay까지 해보기.
- 이전페이지에서 클릭이벤트로 줘도 괜찮을거같음.
커스텀훅으로 코드 정리해보기
vscode 렉 해결
빨리 끝나면, firebase db 사용 / 호스팅 공부



이슈1
1. 전페이지에서 타고 들어갔을 때 : play pause 부딪히는 에러메시지
 - useRef 로 바꾸니까 해결됨
 - 근데 또 가끔 에러가 뜸.
 - pause 는 media에 paused attribute를 추가하는거임. 얘를 체크해서 play와 안부딪히게 해줘야함. play 코드에다가 paused 체크하는 조건문 추가.
2. 같은 페이지에서 새로고침했을 때 : play()를 interaction 없이 하면 안된다 에러
 - 새로고침하면 이전페이지로 보내버릴까?
 - useLocation 써서, 새로고침 잡아낼 수 있을거같은데(얘는 최후통첩)

;완료
; 이슈2
; index 어떻게 찍히나 파악필요
; 2번 갔다가 1번으로 가면 1번 말고 3번이 재생됨.
; [해결]
; index -1 을 해줘야하는 거였고, setState에서 값이 바로 반영안되는 이슈였음.
; audio 객체를 state 대신 useRef 에다가 관리.


;완료
; [play pause 충돌 관련]
; - audio.play() 는 promise 객체를 반환함.
; --- 재생되고 나서 뭔가 처리하고 싶다면 비동기로 처리가능.
; --- play() 호출은 promise를 반환하는데, 코드에서 promise 관련 처리를 해줘야함.
; - audio.pause()는 promise 객체를 반환안함.
; --- pause 시키고 실행시키는 비동기처리가 불가능함.
; --- pause하고 다음곡 재생시키려고 할 때, 문제가 생김. pause play 충돌
; - 곡이 load가 안돼서 그럼 -> 곡 전체를 페이지 처음에 다 받아와서 저장해놓기.


;완료
; [커스텀훅]
; 오디오
; - 오디오를 가져와서 끌어오는 거까지를 커스텀 훅으로
; - 재생하는 거는, 콘텐츠 따라 가는거기떄문에 페이지 컴포넌트에서 진행
; 스크롤(콘텐츠)
; - 얘는 커스텀훅으로 못쪼갤듯?
; - jsx element에 ref 달아놔야해서.

; audioFile 받아와서 넣는거까지만 추가하기 
; (지금은 커스텀훅 안에 박혀있음.)
; (페이지 단위에서 useAudio에다가 audioFile 넣어주는 형식으로.)



[파이어베이스]
- 일단 호스팅 해놓을까?
파이어스토리지 공부
-> 스토리지 관련 (db) / 리액트에서 꺼내오는 것까지
--- auth, CRUD는 코드로 써놓음
--- CRUD에다가 인가달고 싶으면, firestore의 rules를 잘 조정하면됨. 필요하면 다시 공부
--- file 업로드까지 완료
-> 호스팅 관련

내일 공부사항
- storage에서 파일 가져오기
- 호스팅 안되는 이유 찾기
- 프로젝트 오타 빼고 다시 하기


[디테일 페이지 관련 작업해야할 사항]
플로팅 버튼 / 음악 재생 & 가사보기
<작업중>뒤로가기 버튼
-> 화면 가운데 절반 (피그마 레이어 참고)에 마우스 들면, 커서 바뀌게.
-> 위 아래 인덱스 제외하고, 보수적으로 잡아도 될듯.
-> 커서모양 바뀌게 // 여기 벗어나면 다시 바뀜
스크롤하면 인덱스바 사라지게 / 역스크롤하면 인덱스바 다시 생김.

스크롤 관련 성능 최적화
문틀 모양 div 디자인
음악을 페이지 스크롤해서 바뀔때마다 음악도 바뀌는게 별로인듯?
-> 노래 바뀌는게 너무 빠름.
-> 노래는 그냥 앨범 처음부터 쭉 재생하고
-> 원한다면 넘길 수 있게 클릭 주는게 나을듯.


정규앨범은 페이지 바뀌는 거
비정규앨범은 팝업느낌으로.

둘다 페이지 url은 바뀌는 걸로?

-------------0713-------------
[오늘 작업]

[디테일페이지]
- 플로팅 버튼 / 음악 재생 관리
- 뒤로가기 버튼 마무리 (애니메이션)
; - 스크롤 시 인덱스 바 사라짐 / 역스크롤시 인덱스바 다시 생김.
; - 첫 렌더링할때 전부 빨간색인 문제.

; [비정규앨범 디테일페이지]
; - 팝업 느낌으로 페이지 뜨게
; - url 바뀌게 (페이지 컴포넌트를 따로 만들기)
; - url 안바뀌게 (컴포넌트를 불러오기 / props 활용해서 데이터 가져오기)

[파이어베이스]
- storage에서 파일 가져오기
- 호스팅 안되는 이유    
- 프로젝트 오타 빼고 다시 세팅해보기

[디테일페이지 - 추후]
스크롤 관련 성능 최적화
문틀 모양 div 디자인
음악을 페이지 스크롤해서 바뀔때마다 음악도 바뀌는게 별로인듯?
-> 노래 바뀌는게 너무 빠름.
-> 노래는 그냥 앨범 처음부터 쭉 재생하고
-> 원한다면 넘길 수 있게 클릭 주는게 나을듯.

[공부해야할 사항]
- 커스텀 훅
--- 내 코드가 왜 되는지 모르겠음.
--- 어디까지 커스텀 훅안에서 처리가 되고, 어디까지 페이지 컴포넌트에 넘겨줘야하는지
--- 훅 함수를 import하면, 훅 함수 내의 state도 자동으로 공유가 되는건지
- 비동기 처리에서 trycatch 사용


렌더링되고 -> useEffect 실행
: 첫 렌더링 때 전부 빨간색으로 렌더링 (이때 currentContent)
: useEffect 실행할 때, setCurrentContent 일어나서 리렌더링



-------------0714-------------
[메인페이지]
- 이미지 맞춰보기
- 책장이랑 앨범 넣어서 css 맞추기

[디테일페이지]
- 플로팅 버튼 / 음악 재생 관리
- 뒤로가기 버튼 마무리 (애니메이션)

[파이어베이스]
- storage에서 파일 가져오기
- 호스팅 안되는 이유    
- 프로젝트 오타 빼고 다시 세팅해보기



-------------0717-------------
[메인페이지]
- styled-component에서, 애니메이션 꼽기 (hover했을때 다른 컴포넌트 css 바꾸는거 해결)
- 적응형 관련 사이즈 조절 되는지
- background-image 사이즈 조절 되는지

[인트로페이지]
- 처음에 밑으로 화면 내려갈 때, 토글해야  내려가는거 말고 그냥 자동으로 내려가게
; - css 빨려들어가는 느낌
- 처음에 잔나비 손글씨 (welcome to jannabi world 기획)
- click하면 진행바 쭉 채우고, 다 채웠을 때 바로 입장되게?

[정규앨범 상세페이지]
- 음악 관리 기능
- 상세페이지 디자인 (디자인이 아직 안됨)


-------------0718-------------
[메인페이지]
- 배경이랑, 앨범들 같이 움직이게 css 보수

[샤라웃 페이지]
; - 기초 작업
; - css 작업
; - form 데이터 처리 추가
; - firebase에 데이터 넣고 / 데이터 불러오는 코드
; monkeyHotel 음악도 깔자


; [인트로페이지]
; - 인트로->메인화면 전환간에, 텍스트 페이지 넣기
; - welcome to jannabi world 뜨고나서, 메인화면

-------------0719-------------
[인트로페이지]
; - 스크롤 안되게 
- 맨처음에 are you ready 같은 버튼 화면 -> 클릭이벤트 나게
- 그림 인트로페이지에 바람소리 추가
; - 그림 인트로페이지에 슬라이드 다운 후에, 플로팅으로 클릭 표시

[메인페이지]
; - css 보수공사 1차 (책장)
; --- 이미지 전체에 사이즈가 딱 맞는 div가 들어가야함
; --- 그 div 자식으로 앨범 배치해서, 사이즈 % 조절 먹히게.
; --- div background-size : cover로 하면, width 작아질 때 잘림.
; --- contain으로 하면, 세로가 고정된 채로 가로만 짧아지는 문제 -> 자식요소에서 잡을 수가 없음.
; --- 사진 사이즈 조절 후 px로 사진 사이즈 맞게 입력
; --- 서랍장 사이즈 안바뀌게, 바뀌어야할 정도로 작아지면, 반응형으로 아예 화면 바꾸기.
; - intro 띄울 때, 다른 페이지랑 introPage랑 구분해야함.
; --- useNavigate, useLocation으로 실패
; --- recoilState 활용


[비정규앨범 페이지]
- 페이지 컴포넌트 따로 빼기 vs 모달형식
- 페이지 컴포넌트 따로 빼면, 다시 돌아올 때 스크롤 이슈있음.
- 모달형식으로 빼는 방향 / url 안바뀌고 

[엔딩페이지]
- 글씨 써지면서 멘트 (맨처음이랑 같은 이펙트로)
- 인트로 페이지로 리다이렉션 (그림)

[커스텀훅]
; - useAudio 추상화 추가
; --- props 받는거 : 배열 단일파일 둘다 되게
; --- export 빼는거 : play, pause 같이 단순한거로.
- useAudios 추상화 다시

[정규앨범 상세]
- [작업중]1집 css 



-------------0720-------------
[정규앨범 상세]
- 1집 css
- 1집에서 배경 바꿨을 때, index 바뀌는 것도 안됨.
--- css 짜고 나서 다시 스크롤 부분 만지는 걸로.
- [작업중]3집 기초공사
--- 인덱스 언제부터 띄울건지.
--- 인트로 페이지 구분
--- 노래

[작업중]rem 으로 작업 중에, rem으로 작업한 다른 페이지들이 다 바뀌는 문제

[비정규앨범 페이지]
- 페이지 컴포넌트 따로 빼기 vs 모달형식
- 페이지 컴포넌트 따로 빼면, 다시 돌아올 때 스크롤 이슈있음.
- 모달형식으로 빼는 방향 / url 안바뀌고 

[인트로페이지]
- 맨처음에 are you ready 같은 버튼 화면 -> 클릭이벤트 나게
- 그림 인트로페이지에 바람소리 추가

[파이어베이스]
- 프로젝트 다시 파기
; - 다시 팔지 말고 배포부터.


-------------0721-------------
[정규앨범 상세]
- 정규앨범 css는 가장 마지막으로
- css 끝나는 대로 index 바뀌는거 다시 손보기.

[비정규앨범 페이지]
; - css 기초공사
; - 컴포넌트 하나로, 앨범 여러개 띄울 수 있게.
; --- 컴포넌트 하나에, param 따라 달라지게 통일하기.
- 비정규앨범 상세에서, 바로 다음으로 넘어갈 수 있는 버튼 추가.
- 다시 메인페이지로 가면 스크롤 유지되있게.

[메인페이지]
; - 책장 마우스 댔을 때 애니메이션
; --- styled-component에서, 다른 요소 css 변경하는법
; --- 하면 됨. 부모자식 말고 sibling 경우에는 ~ 넣어주면 됨.
; --- hover가 되는게 있고 안되는게 있음.
; --- tsx 상에서 먼저 써줘야함.
- 클릭 이벤트 가능한 요소들에게 이펙트 (얘는 누를수있다.)
- row를 margin-top 대신 position, top으로 바꿔야할듯
--- margin으로 잡으니까, row 하나 바꾸려면 다 바꿔줘야함
- img / hoveredImg 로딩 차이
--- img 는 바로 로딩되는데, hoveredImg 로딩이 안됨.
--- img 로딩될떄까지 로딩화면 띄우면 너무 길게 걸림.

[인트로]
; - 초반 클릭이벤트 막기

: 음악 깔기 (바람소리)

[기타]
; - 샤라웃 페이지 사진, 글자가 커지는 문제. (다른 페이지만 만졌는데)
; -> 각 컴포넌트 별 wrapper에 emSize 주고 rem -> rem으로 변경.
; -> 샤랴웃 페이지 rem -> em으로 수정
- 폰트 가져오기
; - 파비콘 / 사이트명

[작업중]반응형 관련 : media-query로 rem 설정해주기
- css media-query 사용 vs react-reponsive 라이브러리
- css도 바꿔야하고, tsx 파일도 바꿔야 함.
- [media-query]
--- 1. media-query 속성을 모듈화 / 2. 미디어쿼리 자체를 모듈화
--- css에서 조건문 써서 css 다르게 짤 수 있음.
--- tsx 파일도 다르게 짤 수 있는거같음. 이벤트리스너 달아서 좀 번거로움
- [react-reponsive]
--- 얘 사용해보자.
--- tsx 바꾸는 거는 바로 됨.
--- css 바꾸는 것도 한번에 되는지 체크필요.

- 배포한 파일이랑, 로컬파일이랑 css 다르게 먹음(글자 이미지 크기가 다름).

-------------0722-------------
[반응형 작업]
react-responsive 활용
- css 먹이는 방법
- rem을 media-query로 설정해주기


[비정규앨범 상세페이지]
; - 기초 공사
데이터 보수
; - 데이터 맞는지 체크
- 배급사 추가
- 곡 여러개인 거 추가 (데이터에 추가, 컴포넌트에서도 map 처리)
노래 재생 추가
- 자동 재생
- prev play next 추가.



-------------0723-------------
[반응형 작업]
; react-responsive 활용
; - css 먹이는 방법 (media-query)
- rem을 media-query로 설정하기
; - css는 media-query로 / 


[비정규앨범 상세페이지]
; - 기초 공사
; 데이터 보수
; - 배급사 추가
; - 곡 여러개인 거 추가 (데이터에 추가, 컴포넌트에서도 map 처리)
; 노래 재생 추가
; - 자동 재생
; - prev play next 추가.
코멘트 오른쪽 큰화면에 랜덤으로 띄워주기.
- 코멘트 아니더라도 띄워줄만한거.
음원 파일 넣기
1번 앨범 긴 제목 스크롤 추가
- 스크롤 표시 대신 방법 고민
- 자동으로 흘러가게 ?
; 비정규앨범 디테일에서 페이지 이동할 때, audioFile 로딩 관련 에러.
; 반응형 공사


[정규 앨범 상세 페이지]
- css 기초 공사
--- index, audio 관련 로직은 css 공사 후에 추가.

[기타]
- 이미지 받아오는 속도가 느림. 배포한걸로 보면 더 심함.
--- css파일에서 불러오는거 vs 컴포넌트에서 prop으로 넘겨주기
--- 로딩처리할지
--- 다른 방법 / 인트로페이지 시작하자마자 전역변수로 이미지 다 받아놓기?

노래 / 폰트 다운로드
; - ttf woff woff2
; --- 로컬에서 사용할건지, 웹폰트로 사용할건지 차이
; --- web 폰트일수록, 버전 높을수록 가벼움. 익스플로러 호환안되는 것뿐.
; --- woff2 사용. 보완하고 싶으면 src 파일형식 여러개 달면 됨.
- 저작권 관련


[작업중]샤라웃 페이지 반응형 작업
- 새 css 페이지 파서 작업
- logo 커졌다가 작아지면서 위 고정
- form 밑에서 드래그로 올라오다가 아래 고정.
- 스크롤 이벤트 수정


[반응형]
- 인트로 페이지 태블릿
- 메인페이지 태블릿, 모바일
- 반응형으로 em, rem 세팅하기

[에러]
; - 비정규앨범 상세페이지 이동 간 audio 관련 에러
- 모바일 사파리로 봤을 때 뜨는 에러들.
--- the operation was aborted
--- 권한 없다고 뜨는거



-------------0725-------------
[비정규앨범 상세페이지]
코멘트 오른쪽 큰화면에 랜덤으로 띄워주기.
- 코멘트 아니더라도 띄워줄만한거.
음원 파일 넣기
1번 앨범 긴 제목 스크롤 추가
- 스크롤 표시 대신 방법 고민
- 자동으로 흘러가게 ?

[정규 앨범 상세 페이지]
[작업중]css 기초 공사
- 1집, 3집 먼저 시작
- 화면은 안내려가고 스크롤만 되게 하는거.


; 샤라웃 페이지 반응형 작업
; - 새 css 페이지 파서 작업
; - logo 커졌다가 작아지면서 위 고정
; - form 밑에서 드래그로 올라오다가 아래 고정.
; - 스크롤 이벤트 수정


-------------0726-------------
[비정규앨범 상세페이지]
코멘트 오른쪽 큰화면에 랜덤으로 띄워주기.
- 코멘트 아니더라도 띄워줄만한거.
음원 파일 넣기
1번 앨범 긴 제목 스크롤 추가
- 스크롤 표시 대신 방법 고민
- 자동으로 흘러가게

[정규 앨범 상세 페이지]
[작업중]css 기초 공사
- 1집 먼저 시작
--- pc
; --- 모바일
- 화면은 안내려가고 스크롤만 되게 하는거.

[기타]
이미지 받아오는 속도가 느림. 배포한걸로 보면 더 심함.
- css파일에서 불러오는거 vs 컴포넌트에서 prop으로 넘겨주기
- 로딩처리할지
- 다른 방법 / 인트로페이지 시작하자마자 전역변수로 이미지 다 받아놓기?

-> 이미지 프리로드
- useLayoutEffect
- preload


모바일 사파리로 봤을 때 뜨는 에러들
- the operation was aborted
- 권한 없다고 뜨는거
비정규앨범 페이지 상세 에러
- 음악 여러개인 페이지에서, 이전 곡으로 돌아가면 재생이 안됨.
반응형 : rem을 media-query로 설정하기


-------------0727-------------
[비정규앨범 상세페이지]
코멘트 오른쪽 큰화면에 랜덤으로 띄워주기.
- 코멘트 아니더라도 띄워줄만한거.
1번 앨범 긴 제목 스크롤 추가
- 스크롤 표시 대신 방법 고민
- 자동으로 흘러가게

[정규 앨범 상세 페이지]
css 기초 공사
- 1집 먼저 시작
; --- pc
; --- 모바일
- 스크롤 따라서 앨범이랑 lp 갈라지게.
- 페이지 넘어가는거 트랜지션 추가.
- 각 앨범별 프리로드
얘부터 하자

앨범별 

; [기타]
; 이미지 받아오는 속도가 느림. 배포한걸로 보면 더 심함.
; - css파일에서 불러오는거 vs 컴포넌트에서 prop으로 넘겨주기
; - 로딩처리할지
; - 다른 방법 / 인트로페이지 시작하자마자 전역변수로 이미지 다 받아놓기?
; -> 이미지 프리로드
; useLayoutEffect
; preload

모바일 사파리로 봤을  뜨는 에러들
- the operation was aborted
- 권한 없다고 뜨는거
비정규앨범 페이지 상세 에러
- 음악 여러개인 페이지에서, 이전 곡으로 돌아가면 재생이 안됨.
반응형 : rem을 media-query로 설정하기


-------------0728-------------
파일정리
; - 데이터 정리

-------------0729-------------
정규앨범 1 완성
; - 스크롤 관련(스크롤 했을 때, lp 찢어지게) : 화면 부드럽게
; - 음악 플레이어 기능

; 스크롤 
; 1. scrollHeight에 따라서, position이랑 top을 조절하는 방법
; - 느리게 스크롤 다운할때는 꽤 잘 동작함.
; - 빠르게 스크롤 다운할때는 툭 끊기는 현상 (scrollHeight이 빠르게 커져서, postion static으로 바뀌었을 때, top 값이 )
; - 스크롤 업할때(position fixed로 바뀌기전에 더 올라가버림.)

; 2. 스크롤 요소를 임의로 집어넣기.
; - 임의 요소(marginDiv)가 있을 때는, 계속 스크롤
; - 아래 요소(introContentDiv) 보일때는 스크롤 이벤트 정지
; - 역스크롤도 scrub으로.
; - 두 개 이상을 동시에 스크롤 하는 법, 두 개 설정 시에, div가 밀려나는 문제
- 스크롤 천천히 되게 하는 방법.


정규앨범 3 기초 공사
- width 늘어날 때, 열 조절하는 법
--- flex-wrap 으로 가능한지 체크
--- grid 체크--- 모바일 css
; - 디자인 크기 조정

firebase deploy 변경사항 반영안되는 문제.


[보완]
hover했을 때, 사진 두장 갈아끼우는거 말고
-> css background alpha값 쓰는거랑, opacity 조절
-> 아니면 덮어씌울 사진 한장만 (알파값 들어가있는 사이즈) 
---> opacity는 안됨.
---> 덮어씌울 사진 경우에는 각도별로 일일이 작업해줘야할 듯.

-------------0731-------------
정규앨범 3 기초 공사
- width 늘어날 때, 열 조절하는 법
--- flex-wrap 으로 가능한지 체크
--- grid 체크--- 모바일 css
; - 음원넣기
; - 음악 재생 바
; --- 음악 시간에 따라 재생바 흐르게
; --- 재생바 조절에 따라 음악 시간 재생
-> 기능 완료. 훅으로 빼기.
---> 훅으로 빼기 애매함. nowIndex state를 빼기 애매함.
; ---> progress bar 재생 안되는 거에 그라데이션 넣기.

; ---> isSelected 인거 info 크게.
; ---> 글자 사이즈 조정.

; - 모바일 보수공사


정규앨범 별로 뒤로가기 버튼 필요함.

정규앨범 1 완성
- 스크롤 천천히 되게 할 수 있는지 체크
; - 파이어베이스에 반영안되는 문제
; 메인페이지 모바일 화면






-------------0801-------------
[정규 3집] 
줄바꿈 처리
- 애니메이션
- 화면 고정

모바일 화면에서 재생했을때 화면.
음악 따라서 가사 트래킹.

[비정규]
폰트, 크기 비율 깨지는거 작업.
재생 모션 관련.
화면 넘어갈때 애니메이션 고민.

[인트로]
모바일에서 사진 비율 맞추기.

[샤라웃 페이지]
[작업중]모바일에서 댓글 올라갈 때 배경사진 고정시키기.
-> gsap 써서 ?
-> 사이즈 조정도


[공부할 것]
콜백 안에 state 콘솔 찍으면 초기값만 찍히는 이슈.
- 이벤트리스너 두번째 인자로 콜백 바로 쓸 때, 콜백 안에 setState 넣어주면, setState가 작동안함.
const handleTimeUpdate = () => {
      const { currentTime, duration } = audioRef.current;
      setAudioProgress(currentTime / duration);
      console.log(audioProgress)
};
- 이렇게 찍으면 계속 초깃값만 찍힘. 두번째부터도.

overflow : scroll 주면, 안에 텍스트가 뿌옇게 보이는 문제.